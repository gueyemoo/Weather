{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/common/components/tab-list/tab-list.component.ts","./src/app/common/components/tab/tab.component.ts","./src/app/common/services/location.service.ts","./src/app/common/services/storage.service.ts","./src/app/common/services/weather.service.ts","./src/app/common/utils/utils.ts","./src/app/components/forecasts-list/forecasts-list.component.ts","./src/app/components/main-page/current-conditions/current-conditions.component.ts","./src/app/components/main-page/main-page.component.ts","./src/app/components/main-page/zipcode-entry/zipcode-entry.component.ts","./src/environments/environment.ts","./src/main.ts","./src/app/app.component.css","./src/app/common/components/tab-list/tab-list.component.css","./src/app/common/components/tab/tab.component.css","./src/app/components/forecasts-list/forecasts-list.component.css","./src/app/components/main-page/current-conditions/current-conditions.component.css"],"sourcesContent":["import { Component } from '@angular/core';\nimport {SwPush, SwUpdate} from '@angular/service-worker';\nimport {interval} from 'rxjs';\nimport {HttpClient} from '@angular/common/http';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n    constructor() {\n\n    }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { AppComponent } from './app.component';\nimport { ZipcodeEntryComponent } from './components/main-page/zipcode-entry/zipcode-entry.component';\nimport { LocationService } from \"./common/services/location.service\";\nimport { ForecastsListComponent } from './components/forecasts-list/forecasts-list.component';\nimport { WeatherService } from \"./common/services/weather.service\";\nimport { CurrentConditionsComponent } from './components/main-page/current-conditions/current-conditions.component';\nimport { MainPageComponent } from './components/main-page/main-page.component';\nimport {RouterModule} from \"@angular/router\";\nimport {routing} from \"./app.routing\";\nimport {HttpClientModule} from \"@angular/common/http\";\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { environment } from '../environments/environment';\nimport { TabListComponent } from './common/components/tab-list/tab-list.component';\nimport { TabComponent } from './common/components/tab/tab.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ZipcodeEntryComponent,\n    ForecastsListComponent,\n    CurrentConditionsComponent,\n    MainPageComponent,\n    TabListComponent,\n    TabComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    RouterModule,\n    routing,\n    ServiceWorkerModule.register('/ngsw-worker.js', { enabled: environment.production })\n  ],\n  providers: [LocationService, WeatherService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { ModuleWithProviders }  from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ForecastsListComponent } from \"./components/forecasts-list/forecasts-list.component\";\nimport { MainPageComponent } from \"./components/main-page/main-page.component\";\n\nconst appRoutes: Routes = [\n  {\n    path: '', component: MainPageComponent\n  },\n  {\n    path: 'forecast/:zipcode', component: ForecastsListComponent\n  }\n];\nexport const routing: ModuleWithProviders<any> = RouterModule.forRoot(appRoutes, {});\n","import { AfterContentChecked, Component, ContentChildren, EventEmitter, Input, Output, QueryList } from '@angular/core';\r\nimport { TabComponent } from '../tab/tab.component';\r\n\r\n@Component({\r\n  selector: 'app-tab-list',\r\n  templateUrl: './tab-list.component.html',\r\n  styleUrls: ['./tab-list.component.css']\r\n})\r\nexport class TabListComponent implements AfterContentChecked {\r\n\r\n  @ContentChildren(TabComponent) tabs: QueryList<TabComponent<any>>;\r\n\r\n  @Input()\r\n  selectedTab: number;\r\n\r\n  @Output()\r\n  selectedTabChange = new EventEmitter<number>();\r\n\r\n  @Output()\r\n  removeTab: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n  /**\r\n   * @description Check if the input is a string\r\n   * @param input\r\n   */\r\n  public isString(input: string): boolean {\r\n    return typeof input === \"string\";\r\n  }\r\n\r\n  /**\r\n   * @description Update selectedTab and notify parent of changes\r\n   * @param clickedTabIndex index of selected tab by user\r\n   */\r\n  public selectTab(clickedTabIndex: number): void {\r\n    this.selectedTab = clickedTabIndex;\r\n    this.selectedTabChange.emit(clickedTabIndex);\r\n  }\r\n\r\n  /**\r\n   * @description allow to close the tab on click\r\n   * @param clickedTabIndex index of selected tab by user\r\n   */\r\n  public closeTab(clickedTabIndex: number) {\r\n    this.removeTab.emit(clickedTabIndex);\r\n  }\r\n\r\n  /**\r\n   * @description Update visually which tab to show or not based on the selectedTab index\r\n   */\r\n  ngAfterContentChecked(): void {\r\n    if (this.tabs && this.tabs.length) {\r\n      const selectedTabIndex = this.selectedTab;\r\n      this.tabs.forEach((tab, tabIndex) => {\r\n        const style = tab.elementRef.nativeElement.style;\r\n        style.display = tabIndex === selectedTabIndex ? \"block\" : \"none\";\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { Component, ElementRef, Input, TemplateRef, Type, inject } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-tab',\r\n  templateUrl: './tab.component.html',\r\n  styleUrls: ['./tab.component.css']\r\n})\r\nexport class TabComponent<Type> {\r\n\r\n  @Input()\r\n  title: string | TemplateRef<any>; //to put a string or a template as title of tab\r\n\r\n  @Input()\r\n  content: TemplateRef<any>; //to put a template as the content of tab\r\n\r\n  @Input()\r\n  singleData: Type; //to pass data to a template content\r\n\r\n  elementRef = inject(ElementRef); //use of elementRef to display or not tab\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport const LOCATIONS : string = \"locations\";\r\n\r\n@Injectable()\r\nexport class LocationService {\r\n\r\n  locations : string[] = [];\r\n\r\n  //expose locations observable to emits zipcodes on any changes\r\n  locations$: BehaviorSubject<string[]> = new BehaviorSubject<string[]>([]);\r\n\r\n  constructor() {\r\n    let locString = localStorage.getItem(LOCATIONS);\r\n    if (locString) {\r\n      this.locations = JSON.parse(locString);\r\n      this.locations$.next(this.locations);\r\n    }\r\n  }\r\n\r\n  addLocation(zipcode : string) {\r\n    if (this.locations.includes(zipcode)) {\r\n      return alert('This location is already in the tabs');\r\n    }\r\n    this.locations.push(zipcode);\r\n    localStorage.setItem(LOCATIONS, JSON.stringify(this.locations));\r\n    this.locations$.next(this.locations);\r\n  }\r\n\r\n  removeLocation(zipcode : string) {\r\n    let index = this.locations.indexOf(zipcode);\r\n    if (index !== -1){\r\n      this.locations.splice(index, 1);\r\n      localStorage.setItem(LOCATIONS, JSON.stringify(this.locations));\r\n      this.locations$.next(this.locations);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { CURRENT_CONDITION_PREFIX, TIMEOUT_LOCALSTORAGE_KEY } from '../utils/utils';\n\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class StorageService {\n\n  defaultTimeout: number = 0.5;\n\n  constructor() { }\n\n  setDataInLocal(keyValue: string, data: any): void {\n    localStorage.setItem(keyValue, data);\n  }\n\n  getDataFromLocal(keyValue: string) {\n    return localStorage.getItem(keyValue)\n  }\n\n  removeDataFromLocal(keyValue: string) {\n    localStorage.removeItem(keyValue);\n\n  }\n\n  /**\n   * @description put the data in localStorage with an additionnal attribute\n   * to determine at which time it was put in the localStorage\n   * @param keyValue \n   * @param data \n   */\n  setDataInLocalWithTime(keyValue: string, data: any): void {\n    const currentTime = new Date().getTime();\n    const dataWithTimestamp = { data, timestamp: currentTime };\n\n    localStorage.setItem(keyValue, JSON.stringify(dataWithTimestamp));\n  }\n\n  /**\n   * @description generate a concatenation of two input in order to set a new keyValue\n   *  format of keyvallue (e.g: prefix:zipcode => Toto:1000)\n   * @param zipcode \n   * @param prefix \n   */\n  generateConcatKeyValue(zipcode: string, prefix: string) {\n    return `${prefix}:${zipcode}`\n  }\n\n  /**\n   * @description return if the value in local storage is expired or not\n   * @param keyValue keyValue used to stock in local storage\n   * @param timeoutInMinutes user timeout for a data to be expired\n   */\n  isDataExpired(keyValue: string, timeoutInMinutes: number): boolean {\n    const storedData = this.getDataFromLocal(keyValue);\n\n    if (storedData) {\n      const parsedData = JSON.parse(storedData);\n      const currentTime = new Date().getTime();\n      const dataTimestamp = parsedData.timestamp;\n\n      // Calculate the time difference in minutes: divide result by 1000*60 as \n      // 1000 is number of milliseconds in one second\n      // 60 is number of second in one minute\n      const timeDifferenceInMinutes = (currentTime - dataTimestamp) / (1000 * 60);\n\n      // return if the data is expired\n      console.log('timeDiff in minutes for(', keyValue, ') : ', timeDifferenceInMinutes);\n      console.log('timeout in minutes set by user: ', timeoutInMinutes);\n      console.log(keyValue + ' is expired ? ' + (timeDifferenceInMinutes > timeoutInMinutes))\n      return timeDifferenceInMinutes > timeoutInMinutes;\n    }\n\n    // If the data does not exist in local storage, we consider it as expired\n    return true;\n  }\n\n  /**\n   * @description Check if the keyvalue based on zipcode exist in local storage and \n   * if the keyvalue is still valid regarding expiration time \n   * @param keyValue keyvalue stored in local storage\n   * @param timeExpiration (optionnal parameter) to set the time before keyValue expire\n   */\n  isKeyInLocalAndValid(keyValue: string, timeExpiration: number = this.defaultTimeout): boolean {\n    const currentCondition = this.getDataFromLocal(keyValue);\n\n    if (currentCondition) { //if key exist in local storage check if it is expired\n      if (!this.isDataExpired(keyValue, timeExpiration)) {\n        console.log('Data not expired ! retrieve value for ', keyValue, ' in local storage.');\n        return true;\n      } else { //if key expired we remove it from local storage\n        console.log('Data expired ! removing key ', keyValue, ' and API will be requested.');\n        this.removeDataFromLocal(keyValue);\n        return false;\n      }\n    }\n\n    console.log('key for ', keyValue, ' does not exist in local storage.');\n    return false; //key does not exist in local storage\n  }\n\n  /**\n   * @description retrieve the time setted by user for expiration of a keyvalue\n   */\n  getTimeoutExpiration(): number {\n    const timeout = this.getDataFromLocal(TIMEOUT_LOCALSTORAGE_KEY)\n    if (timeout) {\n      return JSON.parse(timeout);\n    }\n    return this.defaultTimeout;\n  }\n}\n","import { Injectable, Signal, inject, signal } from '@angular/core';\r\nimport { Observable, Subject, of, throwError } from 'rxjs';\r\n\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { CurrentConditions } from '../../components/main-page/current-conditions/current-conditions.type';\r\nimport { ConditionsAndZip } from '../types/conditions-and-zip.type';\r\nimport { Forecast } from '../../components/forecasts-list/forecast.type';\r\nimport { StorageService } from './storage.service';\r\nimport { CURRENT_CONDITION_PREFIX, CURRENT_FORECAST_PREFIX } from '../utils/utils';\r\nimport { catchError, takeUntil, tap } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class WeatherService {\r\n\r\n  static URL = 'https://api.openweathermap.org/data/2.5';\r\n  static APPID = '5a4b2d457ecbef9eb2a71e480b947604';\r\n  static ICON_URL = 'https://raw.githubusercontent.com/udacity/Sunshine-Version-2/sunshine_master/app/src/main/res/drawable-hdpi/';\r\n\r\n  private currentConditions = signal<ConditionsAndZip[]>([]);\r\n  private storageService = inject(StorageService);\r\n  private timeout = this.storageService.getTimeoutExpiration();\r\n  private _destroyed$: Subject<void> = new Subject<void>();\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /**\r\n  * @description retrieve all the current conditions\r\n  * @param zipcodes \r\n  */\r\n  loadCurrentConditions(zipcodes: string[]): void {\r\n    this.currentConditions.set([]); // prevent to put again the data on component init\r\n    for (let zipcode of zipcodes) {\r\n      this.addCurrentConditions(zipcode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description Add the current condition either from the local storage or from the API\r\n   * if the data do not exist in the local storage and is valid\r\n   * @param zipcode \r\n   */\r\n  addCurrentConditions(zipcode: string): void {\r\n    console.log('--------------NEW GET CONDITION CALL---------------');\r\n    const keyValue = this.storageService.generateConcatKeyValue(zipcode, CURRENT_CONDITION_PREFIX);\r\n    if (this.storageService.isKeyInLocalAndValid(keyValue, this.timeout)) {\r\n      const existingCurrentCondition = JSON.parse(this.storageService.getDataFromLocal(keyValue));\r\n\r\n      this.currentConditions.mutate((conditions) => {\r\n        conditions.push({ zip: zipcode, ...existingCurrentCondition });\r\n        console.log('conditions filled by local storage: ', conditions);\r\n      });\r\n    } else {\r\n    // Here we make a request to get the current conditions data from the API. Note the use of backticks and an expression to insert the zipcode\r\n      this.http.get<CurrentConditions>(`${WeatherService.URL}/weather?zip=${zipcode},us&units=imperial&APPID=${WeatherService.APPID}`)\r\n        .pipe(\r\n          catchError((error: HttpErrorResponse) => {\r\n            // Handle the error from the API\r\n            console.error('HTTP Error has been catched');\r\n            return throwError(error);\r\n          }),\r\n          takeUntil(this._destroyed$)\r\n        )\r\n        .subscribe(data => {\r\n          // Handle successful request from the API\r\n          this.storageService.setDataInLocalWithTime(keyValue, data);\r\n\r\n          this.currentConditions.mutate(conditions => {\r\n            conditions.push({ zip: zipcode, data });\r\n            console.log('conditions filled by http: ', conditions);\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  removeCurrentConditions(zipcode: string) {\r\n    this.currentConditions.mutate(conditions => {\r\n      for (let i in conditions) {\r\n        if (conditions[i].zip == zipcode)\r\n          conditions.splice(+i, 1);\r\n      }\r\n    })\r\n  }\r\n\r\n  getCurrentConditions(): Signal<ConditionsAndZip[]> {\r\n    return this.currentConditions.asReadonly();\r\n  }\r\n\r\n  /**\r\n   * @description retrieve the forecast data from the local storage or the API\r\n   * if the data is not already in the local storage and valid\r\n   * @param zipcode \r\n   */\r\n  getForecast(zipcode: string): Observable<Forecast> {\r\n    console.log('--------------NEW GET FORECAST CALL---------------');\r\n    const keyValue = this.storageService.generateConcatKeyValue(zipcode, CURRENT_FORECAST_PREFIX);\r\n    if (this.storageService.isKeyInLocalAndValid(keyValue, this.timeout)) {\r\n      const localForecast = JSON.parse(this.storageService.getDataFromLocal(keyValue));\r\n      console.log('forecast filled by local storage: ', localForecast.data);\r\n      return of(localForecast.data);\r\n    } else {\r\n      // Here we make a request to get the forecast data from the API. Note the use of backticks and an expression to insert the zipcode\r\n      return this.http.get<Forecast>(`${WeatherService.URL}/forecast/daily?zip=${zipcode},us&units=imperial&cnt=5&APPID=${WeatherService.APPID}`)\r\n        .pipe(tap(data => {\r\n          console.log('forecast filled by https: ', data);\r\n          this.storageService.setDataInLocalWithTime(keyValue, data);\r\n        }));\r\n    }\r\n\r\n  }\r\n\r\n  getWeatherIcon(id): string {\r\n    if (id >= 200 && id <= 232)\r\n      return WeatherService.ICON_URL + \"art_storm.png\";\r\n    else if (id >= 501 && id <= 511)\r\n      return WeatherService.ICON_URL + \"art_rain.png\";\r\n    else if (id === 500 || (id >= 520 && id <= 531))\r\n      return WeatherService.ICON_URL + \"art_light_rain.png\";\r\n    else if (id >= 600 && id <= 622)\r\n      return WeatherService.ICON_URL + \"art_snow.png\";\r\n    else if (id >= 801 && id <= 804)\r\n      return WeatherService.ICON_URL + \"art_clouds.png\";\r\n    else if (id === 741 || id === 761)\r\n      return WeatherService.ICON_URL + \"art_fog.png\";\r\n    else\r\n      return WeatherService.ICON_URL + \"art_clear.png\";\r\n  }\r\n\r\n  /**\r\n  * @description Unsubscribe to prevent any memory leak\r\n  */\r\n  ngOnDestroy() {\r\n    this._destroyed$.next();\r\n    this._destroyed$.complete();\r\n  }\r\n}\r\n","export const CURRENT_CONDITION_PREFIX = 'Condition';\r\nexport const CURRENT_FORECAST_PREFIX = 'Forecast';\r\nexport const TIMEOUT_LOCALSTORAGE_KEY = 'Timeout';\r\nexport const SELECTED_TAB_LOCALSTORAGE_KEY = 'SelectedTab';\r\n","import { Component } from '@angular/core';\r\nimport { WeatherService } from '../../common/services/weather.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Forecast } from './forecast.type';\r\n\r\n@Component({\r\n  selector: 'app-forecasts-list',\r\n  templateUrl: './forecasts-list.component.html',\r\n  styleUrls: ['./forecasts-list.component.css']\r\n})\r\nexport class ForecastsListComponent {\r\n\r\n  zipcode: string;\r\n  forecast: Forecast;\r\n\r\n  constructor(protected weatherService: WeatherService, route: ActivatedRoute) {\r\n    route.params.subscribe(params => {\r\n      this.zipcode = params['zipcode'];\r\n      weatherService.getForecast(this.zipcode)\r\n        .subscribe(data => this.forecast = data);\r\n    });\r\n  }\r\n}\r\n","import { Component, inject, OnDestroy, OnInit, Signal } from '@angular/core';\r\nimport { WeatherService } from \"../../../common/services/weather.service\";\r\nimport { LocationService } from \"../../../common/services/location.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ConditionsAndZip } from '../../../common/types/conditions-and-zip.type';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport { StorageService } from 'app/common/services/storage.service';\r\nimport { SELECTED_TAB_LOCALSTORAGE_KEY } from 'app/common/utils/utils';\r\n\r\n@Component({\r\n  selector: 'app-current-conditions',\r\n  templateUrl: './current-conditions.component.html',\r\n  styleUrls: ['./current-conditions.component.css']\r\n})\r\nexport class CurrentConditionsComponent implements OnInit, OnDestroy {\r\n\r\n  private weatherService = inject(WeatherService);\r\n  private router = inject(Router);\r\n  private storageService = inject(StorageService);\r\n  private _destroyed$: Subject<void> = new Subject<void>();\r\n  protected locationService = inject(LocationService);\r\n  protected currentConditionsByZip: Signal<ConditionsAndZip[]> = this.weatherService.getCurrentConditions();\r\n\r\n  ngOnInit(): void {\r\n    this.loadLocationsChange();\r\n  }\r\n\r\n  //Set getter and setter for custom two way data binding selectedTab\r\n  public get selectedTabIndex(): number {\r\n    return JSON.parse(this.storageService.getDataFromLocal(SELECTED_TAB_LOCALSTORAGE_KEY));\r\n  }\r\n  public set selectedTabIndex(userTabSelected: number) {\r\n    this.storageService.setDataInLocal(SELECTED_TAB_LOCALSTORAGE_KEY, userTabSelected);\r\n  }\r\n\r\n  /**\r\n  * @description listen to locations and load current conditions from weather service\r\n  */\r\n  private loadLocationsChange(): void {\r\n    this.locationService.locations$\r\n      .pipe(takeUntil(this._destroyed$))\r\n      .subscribe((locations) => {\r\n        this.weatherService.loadCurrentConditions(locations);\r\n      });\r\n  }\r\n\r\n  /**\r\n  * @description remove selected tab from the list and the localstorage\r\n  */\r\n  public removeCurrentCondition(tabIndex: number): void {\r\n    const filteredZipcode = this.currentConditionsByZip()[tabIndex].zip;\r\n    this.locationService.removeLocation(filteredZipcode);\r\n  }\r\n\r\n  public showForecast(zipcode: string): void {\r\n    this.router.navigate(['/forecast', zipcode])\r\n  }\r\n\r\n  public getLocationTitle(location: any): string {\r\n    return `${location.data.name} (${location.zip})`;\r\n  }\r\n\r\n  /**\r\n  * @description Unsubscribe to prevent any memory leak\r\n  */\r\n  ngOnDestroy() {\r\n    this._destroyed$.next();\r\n    this._destroyed$.complete();\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-main-page',\r\n  templateUrl: './main-page.component.html'\r\n})\r\nexport class MainPageComponent {\r\n\r\n}\r\n","import { Component, inject } from '@angular/core';\r\nimport { LocationService } from \"../../../common/services/location.service\";\r\nimport { StorageService } from 'app/common/services/storage.service';\r\nimport { TIMEOUT_LOCALSTORAGE_KEY } from 'app/common/utils/utils';\r\n\r\n@Component({\r\n  selector: 'app-zipcode-entry',\r\n  templateUrl: './zipcode-entry.component.html'\r\n})\r\nexport class ZipcodeEntryComponent {\r\n  defaultTimeoutValue: number;\r\n\r\n  private storageService = inject(StorageService);\r\n  private location = inject(LocationService);\r\n\r\n  constructor() {\r\n    this.defaultTimeoutValue = JSON.parse(this.storageService.getDataFromLocal(TIMEOUT_LOCALSTORAGE_KEY))\r\n      || this.storageService.defaultTimeout;\r\n  }\r\n\r\n  /**\r\n   * @description add a zipcode to show in tab\r\n   * @param zipcode \r\n   */\r\n  addLocation(zipcode: string) {\r\n    if (zipcode !== '') {\r\n      this.location.addLocation(zipcode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description save time before token expiration in local storage\r\n   * @param timeout \r\n   */\r\n  saveTimeout(timeout: number) {\r\n    this.storageService.setDataInLocal(TIMEOUT_LOCALSTORAGE_KEY, timeout);\r\n  }\r\n\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tabs-container {\r\n\r\n    .tab {\r\n        display: flex;\r\n        padding: 10px;\r\n        text-align: center;\r\n        align-items: baseline;\r\n        background-color: lightgray;\r\n        cursor: pointer;\r\n        font-size: 15px;\r\n        border: 1px solid black;\r\n        margin-right: 8px;\r\n        border-top-right-radius: 8px;\r\n        border-top-left-radius: 8px;\r\n\r\n        &:hover {\r\n            background-color: lightblue;\r\n            border-top-right-radius: 8px;\r\n            border-top-left-radius: 8px;\r\n        }\r\n\r\n        &.active {\r\n            color: white;\r\n            background-color: rgb(54, 54, 165);\r\n        }\r\n    }\r\n\r\n    .tab p {\r\n        align-items: center;\r\n        margin-right: 20px;\r\n    }\r\n\r\n    .close-icon {\r\n        background-color: lightblue;\r\n        cursor: pointer;\r\n    }\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/common/components/tab-list/tab-list.component.css\"],\"names\":[],\"mappings\":\"AAAA;;IAEI;QACI,aAAa;QACb,aAAa;QACb,kBAAkB;QAClB,qBAAqB;QACrB,2BAA2B;QAC3B,eAAe;QACf,eAAe;QACf,uBAAuB;QACvB,iBAAiB;QACjB,4BAA4B;QAC5B,2BAA2B;;QAE3B;YACI,2BAA2B;YAC3B,4BAA4B;YAC5B,2BAA2B;QAC/B;;QAEA;YACI,YAAY;YACZ,kCAAkC;QACtC;IACJ;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;IACtB;;IAEA;QACI,2BAA2B;QAC3B,eAAe;IACnB;AACJ\",\"sourcesContent\":[\".tabs-container {\\r\\n\\r\\n    .tab {\\r\\n        display: flex;\\r\\n        padding: 10px;\\r\\n        text-align: center;\\r\\n        align-items: baseline;\\r\\n        background-color: lightgray;\\r\\n        cursor: pointer;\\r\\n        font-size: 15px;\\r\\n        border: 1px solid black;\\r\\n        margin-right: 8px;\\r\\n        border-top-right-radius: 8px;\\r\\n        border-top-left-radius: 8px;\\r\\n\\r\\n        &:hover {\\r\\n            background-color: lightblue;\\r\\n            border-top-right-radius: 8px;\\r\\n            border-top-left-radius: 8px;\\r\\n        }\\r\\n\\r\\n        &.active {\\r\\n            color: white;\\r\\n            background-color: rgb(54, 54, 165);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .tab p {\\r\\n        align-items: center;\\r\\n        margin-right: 20px;\\r\\n    }\\r\\n\\r\\n    .close-icon {\\r\\n        background-color: lightblue;\\r\\n        cursor: pointer;\\r\\n    }\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tabShown {\r\n    border: 2px solid black;\r\n    padding: 30px;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/common/components/tab/tab.component.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,uBAAuB;IACvB,aAAa;AACjB\",\"sourcesContent\":[\".tabShown {\\r\\n    border: 2px solid black;\\r\\n    padding: 30px;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.icon {\r\n  width: 45px;\r\n  height: 45px;\r\n  position: absolute;\r\n  right: 20px;\r\n  top: -2px;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/components/forecasts-list/forecasts-list.component.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,SAAS;AACX\",\"sourcesContent\":[\".icon {\\r\\n  width: 45px;\\r\\n  height: 45px;\\r\\n  position: absolute;\\r\\n  right: 20px;\\r\\n  top: -2px;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.close {\r\n  cursor: pointer;\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/components/main-page/current-conditions/current-conditions.component.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,eAAe;AACjB;AACA;EACE,aAAa;EACb,8BAA8B;AAChC\",\"sourcesContent\":[\".close {\\r\\n  cursor: pointer;\\r\\n}\\r\\n.flex {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["Component","AppComponent","_class","constructor","__decorate","selector","template","__NG_CLI_RESOURCE__0","BrowserModule","NgModule","FormsModule","ZipcodeEntryComponent","LocationService","ForecastsListComponent","WeatherService","CurrentConditionsComponent","MainPageComponent","RouterModule","routing","HttpClientModule","ServiceWorkerModule","environment","TabListComponent","TabComponent","AppModule","declarations","imports","register","enabled","production","providers","bootstrap","appRoutes","path","component","forRoot","ContentChildren","EventEmitter","Input","Output","selectedTabChange","removeTab","isString","input","selectTab","clickedTabIndex","selectedTab","emit","closeTab","ngAfterContentChecked","tabs","length","selectedTabIndex","forEach","tab","tabIndex","style","elementRef","nativeElement","display","args","ElementRef","inject","Injectable","BehaviorSubject","LOCATIONS","locations","locations$","locString","localStorage","getItem","JSON","parse","next","addLocation","zipcode","includes","alert","push","setItem","stringify","removeLocation","index","indexOf","splice","TIMEOUT_LOCALSTORAGE_KEY","StorageService","defaultTimeout","setDataInLocal","keyValue","data","getDataFromLocal","removeDataFromLocal","removeItem","setDataInLocalWithTime","currentTime","Date","getTime","dataWithTimestamp","timestamp","generateConcatKeyValue","prefix","isDataExpired","timeoutInMinutes","storedData","parsedData","dataTimestamp","timeDifferenceInMinutes","console","log","isKeyInLocalAndValid","timeExpiration","currentCondition","getTimeoutExpiration","timeout","providedIn","signal","Subject","of","throwError","HttpClient","CURRENT_CONDITION_PREFIX","CURRENT_FORECAST_PREFIX","catchError","takeUntil","tap","WeatherService_1","http","currentConditions","storageService","_destroyed$","loadCurrentConditions","zipcodes","set","addCurrentConditions","existingCurrentCondition","mutate","conditions","zip","get","URL","APPID","pipe","error","subscribe","removeCurrentConditions","i","getCurrentConditions","asReadonly","getForecast","localForecast","getWeatherIcon","id","ICON_URL","ngOnDestroy","complete","SELECTED_TAB_LOCALSTORAGE_KEY","ActivatedRoute","weatherService","route","params","forecast","Router","router","locationService","currentConditionsByZip","ngOnInit","loadLocationsChange","userTabSelected","removeCurrentCondition","filteredZipcode","showForecast","navigate","getLocationTitle","location","name","defaultTimeoutValue","saveTimeout","enableProdMode","platformBrowserDynamic","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}